# Документация к коду логирования

Этот файл содержит настройки для логирования с использованием библиотеки `pino` в Node.js. Логи записываются в два файла: один для успешных сообщений, другой для сообщений об ошибках.

## Импортируемые модули

- `pino`: Библиотека для логирования, которая используется для записи логов.
- `path`: Модуль для работы с путями файлов и каталогов.
- `fs`: Модуль для работы с файловой системой.

## Логирование

### 1. Создание каталога для логов

```javascript
const logDirectory = path.join("logs");
if (!fs.existsSync(logDirectory)) {
  fs.mkdirSync(logDirectory, { recursive: true });
}
```

Этот код проверяет, существует ли каталог `logs`. Если он не существует, создается новый каталог для хранения логов.

### 2. Потоки для логирования

```javascript
const infoStream = pino.destination(path.join(logDirectory, "success.log"));
const warnStream = pino.destination(path.join(logDirectory, "error.log"));
```

- `infoStream` — поток для успешных логов, которые будут записываться в файл `success.log`.
- `warnStream` — поток для логов ошибок, которые будут записываться в файл `error.log`.

### 3. Экспортируемый объект `logger`

Объект `logger` содержит два метода для логирования: `success` и `error`.

#### Метод `logger.success(par)`

```javascript
success: (par = null) => {
  try {
    if (par) {
      if (typeof par == typeof []) {
        pino({ level: "error" }, infoStream).error(JSON.stringify(par));
      } else {
        pino({ level: "error" }, infoStream).error(par);
      }
    } else {
      console.log(`некорректные данные`);
    }
  } catch (error) {
    console.error(error);
  }
}
```

- **Описание**: Этот метод записывает успешное сообщение в файл `success.log`. Если передан параметр, он будет записан в лог.
- **Параметры**:
  - `par`: Сообщение для записи в лог. Может быть строкой или массивом.
- **Особенности**:
  - Если `par` — это массив, он преобразуется в строку JSON перед записью.
  - Если параметр не передан или передан некорректно, в консоль выводится сообщение об ошибке.
  
#### Метод `logger.error(par)`

```javascript
error: (par = null) => {
  try {
    if (par) {
      if (typeof par == typeof []) {
        pino({ level: "error" }, warnStream).error(JSON.stringify(par));
      } else {
        pino({ level: "error" }, warnStream).error(par);
      }
    } else {
      console.log(`некорректные данные`);
    }
  } catch (error) {
    console.error(error);
  }
}
```

- **Описание**: Этот метод записывает сообщение об ошибке в файл `error.log`. Логирует ошибку с уровнем `error`.
- **Параметры**:
  - `par`: Сообщение для записи в лог. Может быть строкой или массивом.
- **Особенности**:
  - Если `par` — это массив, он преобразуется в строку JSON перед записью.
  - Если параметр не передан или передан некорректно, в консоль выводится сообщение об ошибке.

## Примечания

- Логи записываются в два разных файла: `success.log` для успешных сообщений и `error.log` для ошибок.
- Для каждого типа логов используется свой поток (`infoStream` и `warnStream`).
- В случае передачи некорректных данных выводится сообщение в консоль.

## Зависимости

- `pino`: Установите эту библиотеку для работы с логированием.

```bash
npm install pino
```

## Пример использования

```javascript
import { logger } from './logger';

// Логирование успешного сообщения
logger.success("Все прошло успешно");

// Логирование ошибки
logger.error("Произошла ошибка");

// Логирование массива как ошибки
logger.error(["Ошибка 1", "Ошибка 2"]);
```

